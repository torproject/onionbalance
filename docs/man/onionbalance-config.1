.\" Automatically generated by Pandoc 3.1.11.1
.\"
.TH "ONIONBALANCE\-CONFIG" "1" "Apr 16, 2025" "Onionbalance User Manual" ""
.SH NAME
Onionbalance \- an Onion Service descriptor publisher that works as a
load balancer
.SH SYNOPSIS
onionbalance\-config [\-h] [\[en]hs\-version {v3}] [\[en]key KEY] [\-p
PASSWORD] [\-n NUM_INSTANCES] [\-s NUM_SERVICES] [\-t TAG] [\[en]output
OUTPUT] [\[en]no\-interactive] [\-v VERBOSITY]
[\[en]service\-virtual\-port SERVICE_VIRTUAL_PORT] [\[en]service\-target
SERVICE_TARGET] [\[en]version]
.SH DESCRIPTION
Onionbalance allows load balancing Onion Services across multiple
backend Tor instances.
This way the load of introduction and rendezvous requests gets
distributed across multiple hosts.
.PP
Onionbalance provides load\-balancing while also making Onion Services
more resilient and reliable by eliminating single points\-of\-failure
and by protecting the main identity key.
.PP
Onionbalance allows for scaling across multiple Onion Service instances
with no additional software or Tor modifications necessary on the Onion
Service instance.
.SH FULL INVOCATION
.IP
.EX
onionbalance\-config [\-h] [\-\-hs\-version {v3}] [\-\-key KEY] [\-p PASSWORD]
                   [\-n NUM_INSTANCES] [\-s NUM_SERVICES] [\-t TAG]
                   [\-\-output OUTPUT] [\-\-no\-interactive] [\-v VERBOSITY]
                   [\-\-service\-virtual\-port SERVICE_VIRTUAL_PORT]
                   [\-\-service\-target SERVICE_TARGET] [\-\-version]

onionbalance\-config generates config files and keys for Onionbalance instances
and management servers. Calling without any options will initiate an
interactive mode.

options:
  \-h, \-\-help            show this help message and exit
  \-\-hs\-version {v3}     Onion service version (only v3 is supported.
  \-\-key KEY             RSA private key for the master onion service.
  \-p, \-\-password PASSWORD
                        Optional password which can be used to encrypt the
                        master service private key.
  \-n NUM_INSTANCES      Number of instances to generate (default: 2).
  \-s NUM_SERVICES       Number of services to generate (default: 1).
  \-t, \-\-tag TAG         Prefix name for the service instances (default: node).
  \-\-output OUTPUT       Directory to store generate config files. The
                        directory will be created if it does not already
                        exist.
  \-\-no\-interactive      Try to run automatically without prompting for user
                        input.
  \-v VERBOSITY          Minimum verbosity level for logging. Available in
                        ascending order: debug, info, warning, error,
                        critical). The default is info.
  \-\-service\-virtual\-port SERVICE_VIRTUAL_PORT
                        Onion service port for external client connections
                        (default: 80).
  \-\-service\-target SERVICE_TARGET
                        Target IP and port where your service is listening
                        (default: 127.0.0.1:80).
  \-\-version             show program\[aq]s version number and exit
.EE
.SH CONFIGURATION FILE FORMAT
This is a sample configuration file that can be adapted:
.SH EXIT STATUS
Onionbalance is meant to be kept running in the background.
.PP
In case of unrecoverable errors, the exit status is 1.
Otherwise, the exit status is 0.
.SH LIMITATIONS
Onionbalance currently has the following limitations:
.IP "1." 3
Only supports the legacy C Tor implementation.
.IP "2." 3
Does not work along Tor\[cq]s Proof of Work (PoW) defense for Onion
Services.
.IP "3." 3
For other limitations, check the list of issues available at the
Onionbalance source code repository.
.SH SEE ALSO
The \f[I]docs/\f[R] folder distributed with Onionbalance contains the
full documentation, which should also be available at \c
.UR https://onionservices.torproject.org/apps/web/onionbalance/
.UE \c
\&.
.PP
The Onionbalance source code and all documentation may be downloaded
from \c
.UR https://gitlab.torproject.org/tpo/onion-services/onionbalance
.UE \c
\&.
.SH AUTHORS
Silvio Rhatto \c
.MT rhatto@torproject.org
.ME \c.
