.\" Automatically generated by Pandoc 3.1.11.1
.\"
.TH "ONIONBALANCE\-CONFIG" "1" "Apr 23, 2025" "Onionbalance User Manual" ""
.SH NAME
onionbalance\-config \- tool for generating onionbalance(1) config files
and keys
.SH SYNOPSIS
onionbalance\-config [\-h] [\[en]hs\-version {v3}] [\[en]key KEY] [\-p
PASSWORD] [\-n NUM_INSTANCES] [\-s NUM_SERVICES] [\-t TAG] [\[en]output
OUTPUT] [\[en]no\-interactive] [\-v VERBOSITY]
[\[en]service\-virtual\-port SERVICE_VIRTUAL_PORT] [\[en]service\-target
SERVICE_TARGET] [\[en]version]
.SH DESCRIPTION
The onionbalance\-config tool is the fastest way to generate the
necessary keys and config files to get your onion service up and
running.
.SH FULL INVOCATION
.IP
.EX
onionbalance\-config [\-h] [\-\-hs\-version {v3}] [\-\-key KEY] [\-p PASSWORD]
                           [\-n NUM_INSTANCES] [\-s NUM_SERVICES] [\-t TAG]
                           [\-\-output OUTPUT] [\-\-no\-interactive] [\-v VERBOSITY]
                           [\-\-service\-virtual\-port SERVICE_VIRTUAL_PORT]
                           [\-\-service\-target SERVICE_TARGET] [\-\-version]

onionbalance\-config generates config files and keys for Onionbalance instances
and management servers. Calling without any options will initiate an
interactive mode.

options:
  \-h, \-\-help            show this help message and exit
  \-\-hs\-version {v3}     Onion service version (only v3 is supported.
  \-\-key KEY             RSA private key for the master onion service.
  \-p, \-\-password PASSWORD
                        Optional password which can be used to encrypt the
                        master service private key.
  \-n NUM_INSTANCES      Number of instances to generate (default: 2).
  \-s NUM_SERVICES       Number of services to generate (default: 1).
  \-t, \-\-tag TAG         Prefix name for the service instances (default: node).
  \-\-output OUTPUT       Directory to store generate config files. The
                        directory will be created if it does not already
                        exist.
  \-\-no\-interactive      Try to run automatically without prompting for user
                        input.
  \-v VERBOSITY          Minimum verbosity level for logging. Available in
                        ascending order: debug, info, warning, error,
                        critical). The default is info.
  \-\-service\-virtual\-port SERVICE_VIRTUAL_PORT
                        Onion service port for external client connections
                        (default: 80).
  \-\-service\-target SERVICE_TARGET
                        Target IP and port where your service is listening
                        (default: 127.0.0.1:80).
  \-\-version             show program\[aq]s version number and exit
.EE
.PP
When called without any arguments, the config generator will run in an
interactive mode and prompt for user input.
.SH CONFIGURATION FILE FORMAT
This is a sample configuration file that can be adapted:
.SH FILES
Onionbalance requires the following files:
.TP
config.yaml
This is the configuration file that is used by the Onionbalance
management server.
The exact location can be specified by invoking onionbalance with the
\-c option.
.TP
ONION_ADDRESS.key
Each service instance have a private key, which will be derived into the
public address and identity for the Onion Service.
Each private key file is named after the .onion address, so
ONION_ADDRESS.key will be actually like
dpkhemrbs3oiv2fww5sxs6r2uybczwijzfn2ezy2osaj7iox7kl7nhad.key.
It is essential that you keep these files secure.
.PP
By default, onionbalance\-config writes these files in the config/
folder, relative to the folder where it was invoked from.
.PP
The actual folder can be explicitly set by invoking onionbalance\-config
with the \[en]output flag.
.PP
To configure the system\-wide service, onionbalance\-config should set
\[en]output to /etc/onionbalance.
.SH EXIT STATUS
onionbalance\-config exits with a non\-zero status in case of errors.
.PP
Exit status is 2 on command line invocation errors.
.PP
For other, general errors, the exit status is 1.
.PP
Otherwise, the exit status is 0.
.SH AUTHOR
George Kadianakis, Donncha O\[cq]Cearbhaill, Silvio Rhatto \c
.MT rhatto@torproject.org
.ME \c
.SH SEE ALSO
The \f[I]docs/\f[R] folder distributed with Onionbalance contains the
full documentation, which should also be available at \c
.UR https://onionservices.torproject.org/apps/web/onionbalance/
.UE \c
\&.
.PP
The Onionbalance source code and all documentation may be downloaded
from \c
.UR https://gitlab.torproject.org/tpo/onion-services/onionbalance
.UE \c
\&.
.SH AUTHORS
Silvio Rhatto \c
.MT rhatto@torproject.org
.ME \c.
