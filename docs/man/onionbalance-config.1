.\" Automatically generated by Pandoc 3.1.11.1
.\"
.TH "ONIONBALANCE\-CONFIG" "1" "Apr 17, 2025" "Onionbalance User Manual" ""
.SH NAME
onionbalance\-config \- tool for generating onionbalance(1) config files
and keys
.SH SYNOPSIS
onionbalance\-config [\-h] [\[en]hs\-version {v3}] [\[en]key KEY] [\-p
PASSWORD] [\-n NUM_INSTANCES] [\-s NUM_SERVICES] [\-t TAG] [\[en]output
OUTPUT] [\[en]no\-interactive] [\-v VERBOSITY]
[\[en]service\-virtual\-port SERVICE_VIRTUAL_PORT] [\[en]service\-target
SERVICE_TARGET] [\[en]version]
.SH DESCRIPTION
The onionbalance\-config tool is the fastest way to generate the
necessary keys and config files to get your onion service up and
running.
.SH FULL INVOCATION
.IP
.EX
onionbalance\-config [\-h] [\-\-hs\-version {v3}] [\-\-key KEY] [\-p PASSWORD]
                   [\-n NUM_INSTANCES] [\-s NUM_SERVICES] [\-t TAG]
                   [\-\-output OUTPUT] [\-\-no\-interactive] [\-v VERBOSITY]
                   [\-\-service\-virtual\-port SERVICE_VIRTUAL_PORT]
                   [\-\-service\-target SERVICE_TARGET] [\-\-version]

onionbalance\-config generates config files and keys for Onionbalance instances
and management servers. Calling without any options will initiate an
interactive mode.

options:
  \-h, \-\-help            show this help message and exit
  \-\-hs\-version {v3}     Onion service version (only v3 is supported.
  \-\-key KEY             RSA private key for the master onion service.
  \-p, \-\-password PASSWORD
                        Optional password which can be used to encrypt the
                        master service private key.
  \-n NUM_INSTANCES      Number of instances to generate (default: 2).
  \-s NUM_SERVICES       Number of services to generate (default: 1).
  \-t, \-\-tag TAG         Prefix name for the service instances (default: node).
  \-\-output OUTPUT       Directory to store generate config files. The
                        directory will be created if it does not already
                        exist.
  \-\-no\-interactive      Try to run automatically without prompting for user
                        input.
  \-v VERBOSITY          Minimum verbosity level for logging. Available in
                        ascending order: debug, info, warning, error,
                        critical). The default is info.
  \-\-service\-virtual\-port SERVICE_VIRTUAL_PORT
                        Onion service port for external client connections
                        (default: 80).
  \-\-service\-target SERVICE_TARGET
                        Target IP and port where your service is listening
                        (default: 127.0.0.1:80).
  \-\-version             show program\[aq]s version number and exit
.EE
.PP
When called without any arguments, the config generator will run in an
interactive mode and prompt for user input.
.PP
The main directory should be stored on the management server while the
other instance directories should be transferred to the respective
backend servers.
.SH CONFIGURATION FILE FORMAT
This is a sample configuration file that can be adapted:
.SH FILES
.TP
master/config.yaml
This is the configuration file that is used my the Onionbalance
management server.
.TP
master/.key
The private key which will become the public address and identity for
your onion service.
It is essential that you keep this key secure.
.TP
master/torrc\-server
A sample Tor configuration file which can be used with the Tor instance
running on the management server (v2\-only).
.TP
srv/torrc\-instance
A sample Tor config file which contains the Tor HiddenService* options
needed for your backend Tor instance (v2\-only).
.TP
srv//private_key
Directory containing the private key for your backend onion service
instance.
This key is less critical as it can be rotated if lost or compromised
(v2\-only).
.SH EXIT STATUS
onionbalance\-config exits with a non\-zero status in case of errors.
.PP
Exit status is 2 on command line invocation errors.
.PP
For other, general errors, the exit status is 1.
.PP
Otherwise, the exit status is 0.
.SH AUTHOR
George Kadianakis, Donncha O\[cq]Cearbhaill, Silvio Rhatto \c
.MT rhatto@torproject.org
.ME \c
.SH SEE ALSO
The \f[I]docs/\f[R] folder distributed with Onionbalance contains the
full documentation, which should also be available at \c
.UR https://onionservices.torproject.org/apps/web/onionbalance/
.UE \c
\&.
.PP
The Onionbalance source code and all documentation may be downloaded
from \c
.UR https://gitlab.torproject.org/tpo/onion-services/onionbalance
.UE \c
\&.
.SH AUTHORS
Silvio Rhatto \c
.MT rhatto@torproject.org
.ME \c.
